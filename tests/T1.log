time="2022-05-12T04:21:00-04:00" level=info msg="Running command oc new-project istio-system"
time="2022-05-12T04:21:01-04:00" level=info msg="Running command kubectl apply -n istio-system -f /tmp/kubeapply138288583.yaml"
time="2022-05-12T04:21:04-04:00" level=info msg="Command output: \nI0512 04:21:03.170640   24512 request.go:655] Throttling request took 1.151685347s, request: GET:https://api.openupi.noiro.local:6443/apis/machine.openshift.io/v1beta1?timeout=32s\nservicemeshcontrolplane.maistra.io/istio-system unchanged"
time="2022-05-12T04:21:04-04:00" level=info msg="Running command kubectl apply -n istio-system -f /tmp/kubeapply174761082.yaml"
time="2022-05-12T04:21:05-04:00" level=info msg="Command output: \nservicemeshmemberroll.maistra.io/default unchanged"
=== RUN   T1
time="2022-05-12T04:21:38-04:00" level=info msg=TestRequestRouting
time="2022-05-12T04:21:38-04:00" level=info msg="Deploying Bookinfo"
time="2022-05-12T04:21:38-04:00" level=info msg="Running command kubectl apply -n bookinfo -f ../testdata/examples/x86/bookinfo/bookinfo.yaml"
time="2022-05-12T04:21:40-04:00" level=info msg="Command output: \nservice/details created\nserviceaccount/bookinfo-details created\ndeployment.apps/details-v1 created\nservice/ratings created\nserviceaccount/bookinfo-ratings created\ndeployment.apps/ratings-v1 created\nservice/reviews created\nserviceaccount/bookinfo-reviews created\ndeployment.apps/reviews-v1 created\ndeployment.apps/reviews-v2 created\ndeployment.apps/reviews-v3 created\nservice/productpage created\nserviceaccount/bookinfo-productpage created\ndeployment.apps/productpage-v1 created"
time="2022-05-12T04:21:45-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=details -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:21:45-04:00" level=info msg="Command output: \ndetails-v1-6cd699df8c-5zskj"
time="2022-05-12T04:21:45-04:00" level=info msg="app=details pod name: details-v1-6cd699df8c-5zskj"
time="2022-05-12T04:21:45-04:00" level=info msg="Running command kubectl -n bookinfo get pods details-v1-6cd699df8c-5zskj --no-headers"
time="2022-05-12T04:21:46-04:00" level=info msg="Command output: \ndetails-v1-6cd699df8c-5zskj   0/2   ContainerCreating   0     34s"
time="2022-05-12T04:21:46-04:00" level=info msg="details-v1-6cd699df8c-5zskj in namespace bookinfo is not running: ContainerCreating"
time="2022-05-12T04:22:16-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=details -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:22:16-04:00" level=info msg="Command output: \ndetails-v1-6cd699df8c-5zskj"
time="2022-05-12T04:22:16-04:00" level=info msg="app=details pod name: details-v1-6cd699df8c-5zskj"
time="2022-05-12T04:22:16-04:00" level=info msg="Running command kubectl -n bookinfo get pods details-v1-6cd699df8c-5zskj --no-headers"
time="2022-05-12T04:22:16-04:00" level=info msg="Command output: \ndetails-v1-6cd699df8c-5zskj   2/2   Running   0     65s"
time="2022-05-12T04:22:16-04:00" level=info msg="Got the pod name=app=details running!"
time="2022-05-12T04:22:16-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=ratings -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:22:16-04:00" level=info msg="Command output: \nratings-v1-bdbcc68bc-rx6cc"
time="2022-05-12T04:22:16-04:00" level=info msg="app=ratings pod name: ratings-v1-bdbcc68bc-rx6cc"
time="2022-05-12T04:22:16-04:00" level=info msg="Running command kubectl -n bookinfo get pods ratings-v1-bdbcc68bc-rx6cc --no-headers"
time="2022-05-12T04:22:17-04:00" level=info msg="Command output: \nratings-v1-bdbcc68bc-rx6cc   2/2   Running   0     64s"
time="2022-05-12T04:22:17-04:00" level=info msg="Got the pod name=app=ratings running!"
time="2022-05-12T04:22:17-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=reviews,version=v1 -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:22:17-04:00" level=info msg="Command output: \nreviews-v1-754ddd7b6f-2m4gm"
time="2022-05-12T04:22:17-04:00" level=info msg="app=reviews,version=v1 pod name: reviews-v1-754ddd7b6f-2m4gm"
time="2022-05-12T04:22:17-04:00" level=info msg="Running command kubectl -n bookinfo get pods reviews-v1-754ddd7b6f-2m4gm --no-headers"
time="2022-05-12T04:22:17-04:00" level=info msg="Command output: \nreviews-v1-754ddd7b6f-2m4gm   2/2   Running   0     65s"
time="2022-05-12T04:22:17-04:00" level=info msg="Got the pod name=app=reviews,version=v1 running!"
time="2022-05-12T04:22:17-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=reviews,version=v2 -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:22:18-04:00" level=info msg="Command output: \nreviews-v2-675679877f-m8b5r"
time="2022-05-12T04:22:18-04:00" level=info msg="app=reviews,version=v2 pod name: reviews-v2-675679877f-m8b5r"
time="2022-05-12T04:22:18-04:00" level=info msg="Running command kubectl -n bookinfo get pods reviews-v2-675679877f-m8b5r --no-headers"
time="2022-05-12T04:22:18-04:00" level=info msg="Command output: \nreviews-v2-675679877f-m8b5r   2/2   Running   0     65s"
time="2022-05-12T04:22:18-04:00" level=info msg="Got the pod name=app=reviews,version=v2 running!"
time="2022-05-12T04:22:18-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=reviews,version=v3 -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:22:18-04:00" level=info msg="Command output: \nreviews-v3-79d7549c7-25fh9"
time="2022-05-12T04:22:18-04:00" level=info msg="app=reviews,version=v3 pod name: reviews-v3-79d7549c7-25fh9"
time="2022-05-12T04:22:18-04:00" level=info msg="Running command kubectl -n bookinfo get pods reviews-v3-79d7549c7-25fh9 --no-headers"
time="2022-05-12T04:22:18-04:00" level=info msg="Command output: \nreviews-v3-79d7549c7-25fh9   2/2   Running   0     67s"
time="2022-05-12T04:22:18-04:00" level=info msg="Got the pod name=app=reviews,version=v3 running!"
time="2022-05-12T04:22:18-04:00" level=info msg="Running command kubectl -n bookinfo get pod -l app=productpage -o jsonpath='{.items[0].metadata.name}'"
time="2022-05-12T04:22:19-04:00" level=info msg="Command output: \nproductpage-v1-5ddcb4b84f-4lg48"
time="2022-05-12T04:22:19-04:00" level=info msg="app=productpage pod name: productpage-v1-5ddcb4b84f-4lg48"
time="2022-05-12T04:22:19-04:00" level=info msg="Running command kubectl -n bookinfo get pods productpage-v1-5ddcb4b84f-4lg48 --no-headers"
time="2022-05-12T04:22:19-04:00" level=info msg="Command output: \nproductpage-v1-5ddcb4b84f-4lg48   2/2   Running   0     67s"
time="2022-05-12T04:22:19-04:00" level=info msg="Got the pod name=app=productpage running!"
time="2022-05-12T04:22:19-04:00" level=info msg="Creating Gateway"
time="2022-05-12T04:22:19-04:00" level=info msg="Running command kubectl apply -n bookinfo -f ../testdata/examples/x86/bookinfo/bookinfo-gateway.yaml"
time="2022-05-12T04:22:20-04:00" level=info msg="Command output: \ngateway.networking.istio.io/bookinfo-gateway created\nvirtualservice.networking.istio.io/bookinfo created"
time="2022-05-12T04:22:20-04:00" level=info msg="Creating destination rules all"
time="2022-05-12T04:22:20-04:00" level=info msg="Running command kubectl apply -n bookinfo -f ../testdata/examples/x86/bookinfo/destination-rule-all.yaml"
time="2022-05-12T04:22:21-04:00" level=info msg="Command output: \ndestinationrule.networking.istio.io/productpage created\ndestinationrule.networking.istio.io/reviews created\ndestinationrule.networking.istio.io/ratings created\ndestinationrule.networking.istio.io/details created"
=== RUN   T1/TrafficManagement_test_the_new_routing_configuration
time="2022-05-12T04:22:31-04:00" level=info msg="Routing traffic to all v1"
time="2022-05-12T04:22:31-04:00" level=info msg="Running command kubectl apply -n bookinfo -f ../testdata/examples/x86/bookinfo/virtual-service-all-v1.yaml"
time="2022-05-12T04:22:32-04:00" level=info msg="Command output: \nvirtualservice.networking.istio.io/productpage created\nvirtualservice.networking.istio.io/reviews created\nvirtualservice.networking.istio.io/ratings created\nvirtualservice.networking.istio.io/details created"
time="2022-05-12T04:22:55-04:00" level=info msg="bookinfo productpage returned in 2913 ms"
time="2022-05-12T04:22:55-04:00" level=info msg="Success. Routing traffic to all v1."
time="2022-05-12T04:22:55-04:00" level=info msg="bookinfo productpage returned in 43 ms"
time="2022-05-12T04:22:55-04:00" level=info msg="Success. Routing traffic to all v1."
time="2022-05-12T04:22:55-04:00" level=info msg="bookinfo productpage returned in 66 ms"
time="2022-05-12T04:22:55-04:00" level=info msg="Success. Routing traffic to all v1."
time="2022-05-12T04:22:55-04:00" level=info msg="bookinfo productpage returned in 34 ms"
time="2022-05-12T04:22:55-04:00" level=info msg="Success. Routing traffic to all v1."
time="2022-05-12T04:22:55-04:00" level=info msg="bookinfo productpage returned in 104 ms"
time="2022-05-12T04:22:55-04:00" level=info msg="Success. Routing traffic to all v1."
time="2022-05-12T04:22:55-04:00" level=info msg="bookinfo productpage returned in 44 ms"
time="2022-05-12T04:22:55-04:00" level=info msg="Success. Routing traffic to all v1."
=== RUN   T1/TrafficManagement_route_based_on_user_identity
time="2022-05-12T04:22:55-04:00" level=info msg="Traffic routing based on user identity"
time="2022-05-12T04:22:55-04:00" level=info msg="Running command kubectl apply -n bookinfo -f ../testdata/examples/x86/bookinfo/virtual-service-reviews-test-v2.yaml"
time="2022-05-12T04:22:56-04:00" level=info msg="Command output: \nvirtualservice.networking.istio.io/reviews configured"
time="2022-05-12T04:23:17-04:00" level=info msg="bookinfo productpage returned in 1240 ms"
time="2022-05-12T04:23:17-04:00" level=info msg="Success. Route_based_on_user_identity."
time="2022-05-12T04:23:17-04:00" level=info msg="bookinfo productpage returned in 66 ms"
time="2022-05-12T04:23:17-04:00" level=info msg="Success. Route_based_on_user_identity."
time="2022-05-12T04:23:17-04:00" level=info msg="bookinfo productpage returned in 55 ms"
time="2022-05-12T04:23:17-04:00" level=info msg="Success. Route_based_on_user_identity."
time="2022-05-12T04:23:17-04:00" level=info msg="bookinfo productpage returned in 77 ms"
time="2022-05-12T04:23:17-04:00" level=info msg="Success. Route_based_on_user_identity."
time="2022-05-12T04:23:17-04:00" level=info msg="bookinfo productpage returned in 108 ms"
time="2022-05-12T04:23:17-04:00" level=info msg="Success. Route_based_on_user_identity."
time="2022-05-12T04:23:17-04:00" level=info msg="bookinfo productpage returned in 65 ms"
time="2022-05-12T04:23:17-04:00" level=info msg="Success. Route_based_on_user_identity."
time="2022-05-12T04:23:17-04:00" level=info msg=Cleanup
time="2022-05-12T04:23:17-04:00" level=info msg="Running command kubectl delete -n bookinfo -f ../testdata/examples/x86/bookinfo/virtual-service-all-v1.yaml"
time="2022-05-12T04:23:18-04:00" level=info msg="Cleanup Bookinfo"
time="2022-05-12T04:23:18-04:00" level=info msg="Running command kubectl delete -n bookinfo -f ../testdata/examples/x86/bookinfo/destination-rule-all.yaml"
time="2022-05-12T04:23:18-04:00" level=info msg="Running command kubectl delete -n bookinfo -f ../testdata/examples/x86/bookinfo/bookinfo-gateway.yaml"
time="2022-05-12T04:23:18-04:00" level=info msg="Running command kubectl delete -n bookinfo -f ../testdata/examples/x86/bookinfo/bookinfo.yaml"
--- PASS: T1 (131.56s)
    --- PASS: T1/TrafficManagement_test_the_new_routing_configuration (24.17s)
    --- PASS: T1/TrafficManagement_route_based_on_user_identity (22.44s)
PASS
ok  	github.com/maistra/maistra-test-tool/tests	169.330s
